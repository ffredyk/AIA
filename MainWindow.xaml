<Window x:Class="AIA.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
        xmlns:local="clr-namespace:AIA"
        xmlns:views="clr-namespace:AIA.Views"
        xmlns:models="clr-namespace:AIA.Models"
        xmlns:sys="clr-namespace:System;assembly=mscorlib"
        mc:Ignorable="d"
        AllowsTransparency="True"
        Title="AIA Overlay" 
        Icon="pack://application:,,,/Icons/AIA_t.png"
        WindowState="Normal" 
        ResizeMode="NoResize" 
        WindowStyle="None" 
        Topmost="True"
        ShowInTaskbar="False"
        Opacity="1" Height="1080" Width="1920">
    
    <Window.RenderTransform>
        <TranslateTransform Y="0"/>
    </Window.RenderTransform>
    <Window.Background>
        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
            <GradientStop Color="#CC000000"/>
            <GradientStop Color="#5E000000" Offset="1"/>
        </LinearGradientBrush>
    </Window.Background>
    <Window.TaskbarItemInfo>
        <TaskbarItemInfo/>
    </Window.TaskbarItemInfo>
    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Top Toolbar -->
        <views:ToolbarView x:Name="Toolbar" Grid.Row="0" Grid.ColumnSpan="3"/>

        <!-- Main Content Area - Tab Control -->
        <Grid Margin="10" Grid.Row="1" Grid.ColumnSpan="2">
            <Border BorderBrush="#33FFFFFF" BorderThickness="1" CornerRadius="5,5,5,5" VerticalAlignment="Stretch">
                <TabControl Margin="0,8,0,0">
                    <!-- Tasks Tab -->
                    <TabItem IsSelected="True">
                        <TabItem.Header>
                            <StackPanel Orientation="Horizontal">
                                <ui:SymbolIcon Margin="0,0,6,0" Symbol="TaskListSquareDatabase20" />
                                <TextBlock Text="Tasks" />
                            </StackPanel>
                        </TabItem.Header>
                        <views:TasksTabView x:Name="TasksTab"/>
                    </TabItem>
                    
                    <!-- Reminders Tab -->
                    <TabItem>
                        <TabItem.Header>
                            <StackPanel Orientation="Horizontal">
                                <ui:SymbolIcon Margin="0,0,6,0" Symbol="PersonLightbulb20" />
                                <TextBlock Text="Reminders" />
                            </StackPanel>
                        </TabItem.Header>
                        <views:RemindersTabView x:Name="RemindersTab"/>
                    </TabItem>
                    
                    <!-- Data Banks Tab -->
                    <TabItem>
                        <TabItem.Header>
                            <StackPanel Orientation="Horizontal">
                                <ui:SymbolIcon Margin="0,0,6,0" Symbol="BookDatabase20" />
                                <TextBlock Text="Data banks" />
                            </StackPanel>
                        </TabItem.Header>
                        <views:DataBanksTabView x:Name="DataBanksTab"/>
                    </TabItem>
                    
                    <!-- Outlook Tab -->
                    <TabItem>
                        <TabItem.Header>
                            <StackPanel Orientation="Horizontal">
                                <ui:SymbolIcon Margin="0,0,6,0" Symbol="Mail20" />
                                <TextBlock Text="Outlook" />
                                <Border Margin="6,0,0,0" Padding="4,1" CornerRadius="8" Background="#33FF4444"
                                        Visibility="{Binding FlaggedEmails.Count, Converter={StaticResource IntToVisConverter}}">
                                    <TextBlock Text="{Binding FlaggedEmails.Count}" FontSize="10" Foreground="White"/>
                                </Border>
                            </StackPanel>
                        </TabItem.Header>
                        <views:OutlookTabView x:Name="OutlookTab"/>
                    </TabItem>
                    
                    <!-- Teams Tab -->
                    <TabItem>
                        <TabItem.Header>
                            <StackPanel Orientation="Horizontal">
                                <ui:SymbolIcon Margin="0,0,6,0" Symbol="PeopleTeam20" />
                                <TextBlock Text="Teams" />
                                <Border Margin="6,0,0,0" Padding="4,1" CornerRadius="8" Background="#335B5FC7"
                                        Visibility="{Binding TotalTeamsNotifications, Converter={StaticResource IntToVisConverter}}">
                                    <TextBlock Text="{Binding TotalTeamsNotifications}" FontSize="10" Foreground="White"/>
                                </Border>
                            </StackPanel>
                        </TabItem.Header>
                        <views:TeamsTabView x:Name="TeamsTab"/>
                    </TabItem>
                </TabControl>
            </Border>
        </Grid>

        <!-- Current Data Assets -->
        <views:DataAssetsView x:Name="DataAssets" Grid.Row="2" Grid.ColumnSpan="2" Margin="10"/>

        <!-- Footer -->
        <Grid Grid.Row="3" Grid.ColumnSpan="3" HorizontalAlignment="Center" Margin="10">
            <TextBlock Foreground="White" FontWeight="SemiBold" Text="Press ESC to close this overlay" />
        </Grid>

        <!-- Chat Panel -->
        <views:ChatPanelView x:Name="ChatPanel" Grid.Row="1" Grid.Column="2" HorizontalAlignment="Stretch" Margin="10"/>
    </Grid>
</Window>
